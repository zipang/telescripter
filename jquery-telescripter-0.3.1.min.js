!function(t,n){function e(t){if("["!==t[0])return!1;var n={},e=t.split("]"),r=0,i=1,s=2,o=e[0].substr(1).split(",");return n.prompt=["<span ",o[i]?"style='color: "+o[i]+";' ":"","class='prompt",o[s]?" "+o[s]:"","'>",o[r],"</span>"].join(""),n.text=e[1],n}function r(t,e){this.$renderElt=n(t),this.options=e,e.source||(e.source=this.$renderElt.text()),e.autostart&&this.start()}var i={autostart:!0,autoloop:!0,cursor:!0,prompt:"> ",pageDelay:2500,lineDelay:500,charDelay:150,charEvents:!1},s='<span class="cursor">',o="</span>";n.extend(r.prototype,{start:function(){var t=0,n=this.rendering?this.stop():this.init(),e=n.pages,r=n.pages.length,i=function(){n.rendering!==!1&&(r>t?(n.printPage(e[t],t,i),t++):n.options.autoloop&&(t=0,requestAnimationFrame(i)))};return n.rendering=!0,i(),n},init:function(){var t=this.options.source;return"string"==typeof t&&(t=t.split("\n\n")),this.pages=t,this},cls:function(){return this.prompt(this.text="")},append:function(t){return this.refreshScreen(this.text+t)},prompt:function(t,n){return this.append((n?"<br>":"")+(t?'<span class="prompt">'+t+"</span>":""))},refreshScreen:function(t){var n,e,r=this,i=r.text=t;return r.options.cursor&&(e=t[n=t.length-1]||" ",/^[ >]/.test(e)?i+=s+"&nbsp;"+o:i=t.substr(0,n)+s+e+o),r.$renderElt.html(i),r},displayRandomPage:function(t){var n=Math.floor(Math.random()*this.pages.length);return this.displayPage(n,t)},displayPage:function(t,n){var e=this.rendering?this.stop():this.init();return e.rendering=!0,e.printPage(e.pages[t],t,n),e},printPage:function(t,n,r){var i=0,s=this,o=t.split("\n"),a=s.options.lineDelay,p=o.length,u=function(){s.rendering&&(p>i?requestAnimationFrame(s.resume=function(){var t=s.options.prompt,n=o[i],r=e(n);r&&(n=r.text,t=r.prompt),s.prompt(t,i>0),s.rendering=setTimeout(function(){s.printLine(n,i,u),i++},a)}):s.rendering=r?setTimeout(r,s.options.pageDelay):!1)};return s.cls(),s.$renderElt.trigger("newpage",[n+1]),u(),s},printLine:function(t,n,e){var r,i=t.split(""),s=this,o=0,a=i.push(" "),p=s.$renderElt,u=s.options.charDelay,c=s.options.charEvents?function(){return p.trigger("newChar",r=i[o++]),r}:function(){return i[o++]},h=function(){requestAnimationFrame(s.resume=function(){s.rendering!==!1&&(a>o?(s.refreshScreen(s.text+c()),s.rendering=setTimeout(h,u)):(p.trigger("newline",[n+1]),e()))})};h()},stop:function(){return clearTimeout(this.rendering),this.rendering=!1,this},pauseResume:function(){var t=this;return t.rendering?t.stop():(t.rendering=!0,t.resume())}}),n.fn.telescripter=function(t){return n(this).each(function(e,s){var o=n.extend({},i,t),a=new r(s,o);n(s).data("telescripter",a).on("start",function(){a.start()}).on("stop",function(){a.stop()})})}}(this,jQuery);